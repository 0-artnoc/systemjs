/*
 * SystemJS
 * 
 * Copyright (c) 2013 Guy Bedford
 * MIT License
 */

!function(e){e.upgradeSystemLoader=function(){function t(e){function t(e){var t=String(e).replace(/^\s+|\s+$/g,"").match(/^([^:\/?#]+:)?(\/\/(?:[^:@]*(?::[^:@]*)?@)?(([^:\/?#]*)(?::(\d*))?))?([^?#]*)(\?[^#]*)?(#[\s\S]*)?/);return t?{href:t[0]||"",protocol:t[1]||"",authority:t[2]||"",host:t[3]||"",hostname:t[4]||"",port:t[5]||"",pathname:t[6]||"",search:t[7]||"",hash:t[8]||""}:null}function r(e,r){function n(e){var t=[];return e.replace(/^(\.\.?(\/|$))+/,"").replace(/\/(\.(\/|$))+/g,"/").replace(/\/\.\.$/,"/../").replace(/\/?[^\/]*/g,function(e){"/.."===e?t.pop():t.push(e)}),t.join("").replace(/^\//,"/"===e.charAt(0)?"/":"")}return r=t(r||""),e=t(e||""),r&&e?(r.protocol||e.protocol)+(r.protocol||r.authority?r.authority:e.authority)+n(r.protocol||r.authority||"/"===r.pathname.charAt(0)?r.pathname:r.pathname?(e.authority&&!e.pathname?"/":"")+e.pathname.slice(0,e.pathname.lastIndexOf("/")+1)+r.pathname:e.pathname)+(r.protocol||r.authority||r.pathname?r.search:r.search||e.search)+r.hash:null}var n=System,a=function(e){if(!(e instanceof Module)){for(var t=[],r=0;r<e.length;r++)t[r]=a(e[r]);return t}return e.__useDefault?e["default"]:e};e.getModule=function(t){return a(e.get(t))},e.set("@empty",Module({}));var s=e["import"];e["import"]=function(t,r){return new Promise(function(n){n(e.normalize.call(this,t,r&&r.name,r&&r.address))}).then(function(t){return Promise.resolve(s.call(e,t,r)).then(function(e){return a(e)})})};var o;if("undefined"==typeof window)o=__dirname;else if(o=document.baseURI,!o){var u=document.getElementsByTagName("base");o=u[0]&&u[0].href||window.location.href}System.meta={};var i,l=e.locate;e.locate=function(e){this.baseURL!=i&&(this.baseURL=i=r(o,this.baseURL));var t=System.meta[e.name];for(var n in t)e.metadata[n]=t[n];return Promise.resolve(l.call(this,e))},e.__exec=function(t){try{Function("global","with(global) { "+t.source+" \n }"+(t.address&&!t.source.match(/\/\/[@#] ?(sourceURL|sourceMappingURL)=([^\n'"]+)/)?"\n//# sourceURL="+t.address:"")).call(e.global,e.global)}catch(r){throw"SyntaxError"==r.name&&(r.message="Evaluating "+t.address+"\n	"+r.message),r}"@traceur"==t.name&&(e.global.traceurSystem=e.global.System,e.global.System=n)}}function r(e){e.bundles=e.bundles||{};var t=e.fetch;e.fetch=function(r){for(var n in e.bundles)if(-1!=s.call(e.bundles[n],r.name))return Promise.resolve(e.normalize(n)).then(function(t){return e.bundles[t]=e.bundles[t]||e.bundles[n],e.load(t)}).then(function(){return""});return t.apply(this,arguments)};var r=e.locate;e.locate=function(t){return e.bundles[t.name]&&(t.metadata.bundle=!0),r.call(this,t)};var n=e.instantiate;e.instantiate=function(t){return t.metadata.bundle?{deps:[],execute:function(){return e.__exec(t),new Module({})}}:n.apply(this,arguments)}}function n(e){e.defined={},e.register=function(t,r,n){e.defined[t]={deps:r,execute:function(){return Module(n.apply(this,arguments))}}};var t=e.fetch;e.fetch=function(r){return e.defined[r.name]?"":t.apply(this,arguments)};var r=e.instantiate;e.instantiate=function(t){if(e.defined[t.name]){var n=e.defined[t.name];return delete e.defined[t.name],n}return r.apply(this,arguments)}}function a(e){var t=/^(\d+)(?:\.(\d+)(?:\.(\d+)(?:-([0-9A-Za-z-]+(?:\.[0-9A-Za-z-]+)*))?)?)?$/,r=function(e,t){var r,n=e.split("."),a=t.split(".");n[2]&&-1!=(r=s.call(n[2],"-"))&&n.splice(2,1,n[2].substr(0,r),n[2].substr(r+1)),a[2]&&-1!=(r=s.call(a[2],"-"))&&a.splice(2,1,a[2].substr(0,r),a[2].substr(r+1));for(var o=0;o<Math.max(n.length,a.length);o++){if(!n[o])return 1;if(!a[o])return-1;if(n[o]!=a[o])return parseInt(n[o])>parseInt(a[o])?1:-1}return 0},n=e.normalize;e.versions=e.versions||{},e.normalize=function(a,o,u){var i=e.versions;return Promise.resolve(n.call(this,a,o,u)).then(function(e){var n,a,o,u,l=e.indexOf("@");if(-1==l){for(var c in i)if(u=i[c],e.substr(0,c.length)==c&&(o=e.substr(c.length,1),!o||"/"==o))return c+"@"+("string"==typeof u?u:u[u.length-1])+e.substr(c.length);return e}n=e.substr(l+1).split("/")[0];var d,f=n.length;if("^"==n.substr(0,1)&&(n=n.substr(1),d=!0),a=n.match(t),!a)return e;d&&(a[2]||(d=!1),a[3]||(a[2]>0?a[3]="0":d=!1)),d&&(a[1]>0?(a[2]||(n=a[1]+".0.0"),a[3]||(n=a[1]+".0"),d=n,a=[a[1]]):a[2]>0?(d=n,a=[0,a[2]]):(d=!1,a=[0,0,a[3]]),n=a.join("."));var h=e.substr(0,l);if(u=i[h]||[],"string"==typeof u&&(u=[u]),!a[3]||d)for(var m=u.length-1;m>=0;m--){var p=u[m];if(p.substr(0,n.length)==n&&p.substr(n.length,1).match(/^[\.\-]?$/)&&(!d||d&&-1!=r(p,d)))return h+"@"+p+e.substr(h.length+f+1)}return-1==s.call(u,n)&&(u.push(n),u.sort(r),e=h+"@"+n+e.substr(h.length+f+1),a[3]&&-1!=(l=s.call(u,a[1]+"."+a[2]))&&u.splice(l,1),a[2]&&-1!=(l=s.call(u,a[1]))&&u.splice(l,1),i[h]=1==u.length?u[0]:u),e})}}e.upgradeSystemLoader=void 0;{var s=Array.prototype.indexOf||function(e){for(var t=0,r=this.length;r>t;t++)if(this[t]===e)return t;return-1};Array.prototype.lastIndexOf||function(e){for(var t=this.length-1;t>=0;t--)if(this[t]===e)return t;return-t}}t(System),productionAMD(System),r(System),n(System),a(System)},function(){if(!e.System||e.System.registerModule)if("undefined"!=typeof window){var t=document.getElementsByTagName("script"),r=t[t.length-1].src,n=r.substr(0,r.lastIndexOf("/")+1);document.write('<script type="text/javascript" src="'+n+'es6-module-loader.js" data-init="upgradeSystemLoader"></script>')}else{var a=require("es6-module-loader");e.System=a.System,e.Loader=a.Loader,e.Module=a.Module,module.exports=e.System,e.upgradeSystemLoader()}else e.upgradeSystemLoader()}()}("undefined"!=typeof window?window:global);